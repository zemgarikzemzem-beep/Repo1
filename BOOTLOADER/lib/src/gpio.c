#include "gpio.h"

void GPIO_Init(void){
	RCC->AHBENR=(RCC_AHBENR_GPIOAEN|RCC_AHBENR_GPIOBEN|RCC_AHBENR_GPIOFEN);
	
	GPIOA->MODER=0x28000000;
	GPIOA->OTYPER=0;
	GPIOA->OSPEEDR=0x0C000000;
	GPIOA->PUPDR=0x24000000;
	
//	GPIOA->MODER|=GPIO_MODER_MODER9_0; // Вибромотор
	
	GPIOA->MODER|=GPIO_MODER_MODER15_0; // Питание
	GPIOA->BSRR|=(1<<15);
	
	GPIOB->MODER=0x00100000;
	GPIOB->OTYPER=0;
	GPIOB->OSPEEDR=0x00000000;
	GPIOB->PUPDR=0x00000000;
	
	GPIOB->MODER&=~GPIO_MODER_MODER0_Msk; // FIFOP
	
	GPIOF->MODER=0x0000F000;
	GPIOF->OTYPER=0;
	GPIOF->OSPEEDR=0x00000000;
	GPIOF->PUPDR=0x00000000;
	
	GPIOA->MODER|=(0b01<<GPIO_MODER_MODER10_Pos); // Включение подсветки на дисплее
	GPIOA->BSRR|=(1<<10);
	
	GPIOA->MODER&=~(GPIO_MODER_MODER11|GPIO_MODER_MODER12);    // Инициализация кнопок:  A11 - UP, B9 - DOWN, A12 - BACK, B8 - OK
	GPIOA->PUPDR|=(GPIO_PUPDR_PUPDR11_0|GPIO_PUPDR_PUPDR12_0);
	GPIOB->MODER&=~(GPIO_MODER_MODER8|GPIO_MODER_MODER9);
	GPIOB->PUPDR|=(GPIO_PUPDR_PUPDR8_0|GPIO_PUPDR_PUPDR9_0);
}
